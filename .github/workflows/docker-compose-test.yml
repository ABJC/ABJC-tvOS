name: "Docker Compose Test"

      
on:
  push:
  workflow_dispatch:
jobs:
  docker:
    runs-on: ubuntu-latest
    
    steps:      
    - name: Checkout Developer-Utils
      uses: actions/checkout@v2
      with: 
        repository: "ABJC/Developer-Utilities"
        token: ${{ secrets.GH_TOKEN }} # Because normal token won't work for some reason
        ref: "main"
        
    - name: Docker Setup
      uses: docker-practice/actions-setup-docker@1.0.8
      
    - name: Compose
      run: "cd jellyfin-docker; docker-compose up -d"
      
  test:
    runs-on: macos-11
    steps:
    - name: "Wait for Jellyfin Server"
      uses: mydea/action-wait-for-api@v1
      with:
        url: "http://localhost:8096/System/Ping"
    
    - name: Checkout
      run: "echo 'Server is Up'"
      #uses: actions/checkout@v2
      
    #- name: Select Xcode Version
    #  uses: maxim-lobanov/setup-xcode@v1
    #  with:
    #    xcode-version: '13.0'
